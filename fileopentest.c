#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>

#define MAX_BUF 1024

char g_filename[] = "test.txt";

int rowlen(int alreadyread)
{
	int 	fd;
    int     count;
    int     result;
    int     temp;
    char    buf[MAX_BUF];
    result = 0;

	fd = open(g_filename, O_RDONLY);
	read(fd, buf, alreadyread);
    while ((temp = read(fd, buf, sizeof(buf))) > 0)
    {
        count = 0;
        while (buf[count] != '\n' && count < temp)
        {
            count++;
            result++;
        }
        if (buf[count] == '\n')
            return (result + 1);
    }
    return (-1);
}

int main(void)
{
	int alreadyread;

	alreadyread = 0;
	printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);
	printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);
	printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);
	printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);
	printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);
	printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);printf("%d", rowlen(alreadyread));
	alreadyread += rowlen(alreadyread);

	return (0);
}
